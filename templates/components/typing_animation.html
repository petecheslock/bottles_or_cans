<style>
.typing-cursor {
    display: inline-block;
    width: 0.6em;  /* Made wider for a square look */
    height: 1.2em;
    background-color: currentColor;
    margin-left: 2px;
    animation: blink 1s step-end infinite;
    vertical-align: text-bottom;
    opacity: 0.7;  /* Slightly transparent for a softer look */
}

@keyframes blink {
    0%, 100% { opacity: 0.7; }
    50% { opacity: 0; }
}
</style>

<script>
// Centralized typing speed configuration
const TYPING_CONFIG = {
    baseSpeed: 20,          // Base milliseconds between characters
    variation: 10,          // Random variation range (Â±10ms)
    sentencePause: 100,     // Extra pause after .!?
    clausePause: 50,        // Extra pause after ,;:
    finalDelay: 300        // Delay before showing next content
};

function typeText(text, elementId, onComplete = null) {  // Make callback optional
    const element = document.getElementById(elementId);
    element.textContent = '';
    
    // Add cursor element
    const cursor = document.createElement('span');
    cursor.className = 'typing-cursor';
    element.appendChild(cursor);
    
    let index = 0;
    function type() {
        if (index < text.length) {
            cursor.insertAdjacentText('beforebegin', text.charAt(index));
            index++;
            
            const variation = Math.random() * TYPING_CONFIG.variation * 2 - TYPING_CONFIG.variation;
            const delay = TYPING_CONFIG.baseSpeed + variation;
            
            const char = text.charAt(index - 1);
            if ('.!?'.includes(char)) {
                setTimeout(type, delay + TYPING_CONFIG.sentencePause);
            } else if (',;:'.includes(char)) {
                setTimeout(type, delay + TYPING_CONFIG.clausePause);
            } else {
                setTimeout(type, delay);
            }
        } else {
            // Only call onComplete if it was provided
            if (onComplete) {
                setTimeout(onComplete, TYPING_CONFIG.finalDelay);
            }
        }
    }
    type();
}
</script> 